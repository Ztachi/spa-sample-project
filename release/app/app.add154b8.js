require.on("trace",function(e,t,r){e.indexOf("circular")>-1&&console.log("circular: ",e,t,r)}),require.on("error",function(e){console.log(e)}),define("app/app",["require","exports","module","base/lang","base/kernel","base/on","base/topic","base/dom","base/router","base/touch","./app.config","./common","./routes","./services"],function(require,exports,module){function e(){t.txApp.services=u,t.txApp.routes=p,r.selector("a",n.tap).call(this,document,function(e){var t=o.attr("href")&&this.href;if(!/^javascript:/.test(t)){var r=o.attr(this,"data-extra");r&&(t+=(-1==t.indexOf("?")?"?":"&")+r),e.preventDefault(),p.navigate(t,!0)}}),a.subscribe("/app/load/error",function(e){c.consumeError(e,function(e){"timeout"===e.type?alert("\u7f51\u7edc\u4e0d\u7ed9\u529b~"):"abort"!==e.type&&alert(e.message)})}),s.history.start({root:i.ROUTE_ROOT,pushState:!0,silent:!1})}var t=(require("base/lang"),require("base/kernel")),r=require("base/on"),a=require("base/topic"),o=require("base/dom"),s=require("base/router"),n=require("base/touch"),i=require("./app.config"),c=require("./common"),p=require("./routes"),u=require("./services");t.txApp={},require.ready(function(){o.css(o.byId("app-main"),"min-height",o.height(window)+1+"px"),c.checkUser(!0).always(e)})});